<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qs/6.10.3/qs.min.js"></script>
    <title>Simple Form</title>
</head>
<body>
    <h1>Simple Form</h1>
    <form>
        Enter your text:<br>
        <input type="text" id="textField" name="textField"><br>
        <input type="button" onclick="submit_data()" value="Send">
    </form>

<script>
    window.Telegram.WebApp.enableClosingConfirmation()

    // Function to decode JSON from URL parameters
        function decodeJsonFromUrl() {
            // Get the current URL
            const url = window.location.href;

            // Create a URL object
            const urlObj = new URL(url);

            // Get the search parameters
            const params = urlObj.search.substring(1); // Remove the leading '?'

            // Parse the query string using qs
            const jsonData = qs.parse(params, { indices: false });

            // Log the decoded JSON data
<!--            console.log(jsonData);-->

            // If you need to convert it to a JSON string
            const jsonString = JSON.stringify(jsonData, null, 2);
<!--            console.log(jsonString);-->
            return jsonString
        }

        // Call the function to decode JSON from URL parameters




<!--    const queryString = window.location.search;-->
<!--    const urlParams = new URLSearchParams(queryString);-->
<!--    const incom_data = urlParams.get('data');-->
<!--     const tmp = urlParams.get('show_save');-->
<!--    document.getElementById('textField').value = incom_data + '_' + tmp-->
        document.getElementById('textField').value = jsonString

    function submit_data() {
        tfv = document.getElementById('textField').value;
        const data = JSON.stringify({data: tfv});
        Telegram.WebApp.sendData(data);
        Telegram.WebApp.close();
    }

</script>
</body>
</html>